import{d as v,a as x,b as w,u as k,r as d,X as z,c as D,e as m,t as E,f as _,g as C,B,h as S,k as g}from"./index.9bdb13cd.js";async function y(t){const r=new FileReader;return r.readAsText(t),new Promise(e=>{r.onload=l=>e(T(l))})}async function T(t){const e=t.target.result;if(typeof e=="string"){const l=e.slice(0,e.indexOf(`
`)).split(",");return e.slice(e.indexOf(`
`)+1).split(`
`).filter(a=>a!=="").map(a=>{const o=a.split(",");return l.reduce((c,f,p)=>(c[f]=o[p],c),{})})}}const A=v({__name:"SubscriptionFileInput",setup(t){const r=x(()=>S(()=>import("./TheError.77939047.js"),["assets/TheError.77939047.js","assets/index.9bdb13cd.js","assets/index.4f4cdecd.css"])),{t:e}=w(),l=k(),{subscribeToChannel:a}=l,o=d(),c=d();async function f(n){try{if(n&&n[0].type==="text/csv"){o.value=void 0;const s=await y(n[0]);s==null||s.forEach(u=>a(u["Channel Id"]))}else throw new Error("Wrong file type")}catch(s){console.error(s.message),o.value=s}}async function p(n){const u=(n==null?void 0:n.currentTarget).files;try{if(u&&u[0].type==="text/csv"){o.value=void 0;const i=await y(u[0]);i==null||i.forEach(h=>a(h["Channel Id"]))}else throw new Error("Wrong file type")}catch(i){console.error(i.message),o.value=i}}return z(c,f),(n,s)=>(g(),D("div",null,[m("div",{ref_key:"importDropZone",ref:c,class:"mt-6 flex h-64 w-full items-center justify-center rounded-lg border-4 border-dashed border-blue-600 p-4 text-center"},E(_(e)("drop-zone")),513),m("input",{type:"file",class:"mt-4 block w-full font-sans text-base font-normal text-gray-900 file:block file:w-full file:rounded-lg file:border-2 file:border-transparent file:bg-blue-50 file:py-2 file:px-4 hover:cursor-pointer file:hover:cursor-pointer",onChange:p},null,32),o.value?(g(),C(_(r),{key:0,message:o.value.message,class:"h-fit p-2"},null,8,["message"])):B("",!0)]))}});function b(t){t.__i18n=t.__i18n||[],t.__i18n.push({locale:"",resource:{"en-US":{"drop-zone":r=>{const{normalize:e}=r;return e(["Drop subscriptions.csv file here"])}},"uk-UA":{"drop-zone":r=>{const{normalize:e}=r;return e(["\u041F\u0435\u0440\u0435\u0442\u044F\u0433\u043D\u0456\u0442\u044C \u0441\u044E\u0434\u0438 subscriptions.csv \u0444\u0430\u0439\u043B"])}},"ru-RU":{"drop-zone":r=>{const{normalize:e}=r;return e(["\u041F\u0435\u0440\u0435\u0442\u0430\u0449\u0438\u0442\u0435 subscriptions.csv \u0444\u0430\u0439\u043B \u0441\u044E\u0434\u0430"])}}}})}typeof b=="function"&&b(A);export{A as default};
