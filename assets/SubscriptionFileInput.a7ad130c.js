import{d as v,a as w,b as z,u as k,r as _,Y as D,c as E,e as d,t as b,f as m,g as C,C as I,h as A,k as h}from"./index.06c48d62.js";async function y(t){const r=new FileReader;return r.readAsText(t),new Promise(e=>{r.onload=a=>e(T(a))})}async function T(t){const e=t.target.result;if(typeof e=="string"){const a=e.slice(0,e.indexOf(`
`)).split(",");return e.slice(e.indexOf(`
`)+1).split(`
`).filter(l=>l!=="").map(l=>{const n=l.split(",");return a.reduce((c,f,p)=>(c[f]=n[p],c),{})})}}const B={for:"file-input",class:"sr-only"},O=v({__name:"SubscriptionFileInput",setup(t){const r=w(()=>A(()=>import("./TheError.025c8673.js"),["assets/TheError.025c8673.js","assets/index.06c48d62.js","assets/index.3fd38403.css"])),{t:e}=z(),a=k(),{subscribeToChannel:l}=a,n=_(),c=_();async function f(o){try{if(o&&o[0].type==="text/csv"){n.value=void 0;const s=await y(o[0]);Array.isArray(s)&&s.forEach(u=>l(u["Channel Id"]))}else throw new Error("Wrong file type")}catch(s){console.error(s.message),n.value=s}}async function p(o){const u=(o==null?void 0:o.currentTarget).files;try{if(u&&u[0].type==="text/csv"){n.value=void 0;const i=await y(u[0]);i==null||i.forEach(x=>l(x["Channel Id"]))}else throw new Error("Wrong file type")}catch(i){console.error(i.message),n.value=i}}return D(c,f),(o,s)=>(h(),E("form",null,[d("div",{ref_key:"importDropZone",ref:c,class:"mt-6 flex h-64 w-full items-center justify-center rounded-lg border-4 border-dashed border-blue-600 p-4 text-center text-gray-900 dark:border-white dark:text-white"},b(m(e)("drop-zone")),513),d("label",B,b(m(e)("file-input-label")),1),d("input",{id:"file-input",type:"file",class:"mt-4 block w-full border-white font-sans text-base font-normal text-gray-900 file:block file:w-full file:rounded-lg file:border-2 file:border-transparent file:bg-blue-50 file:py-2 file:px-4 file:text-gray-900 hover:cursor-pointer file:hover:cursor-pointer dark:text-white dark:file:bg-gray-800 file:dark:text-white",onChange:p},null,32),n.value?(h(),C(m(r),{key:0,message:n.value.message,class:"h-fit p-2"},null,8,["message"])):I("",!0)]))}});function g(t){t.__i18n=t.__i18n||[],t.__i18n.push({locale:"",resource:{en:{"drop-zone":r=>{const{normalize:e}=r;return e(["Drop subscriptions.csv file here"])},"file-input-label":r=>{const{normalize:e}=r;return e(["Upload file"])}},uk:{"drop-zone":r=>{const{normalize:e}=r;return e(["\u041F\u0435\u0440\u0435\u0442\u044F\u0433\u043D\u0456\u0442\u044C \u0441\u044E\u0434\u0438 subscriptions.csv \u0444\u0430\u0439\u043B"])},"file-input-label":r=>{const{normalize:e}=r;return e(["Upload file"])}},ru:{"drop-zone":r=>{const{normalize:e}=r;return e(["\u041F\u0435\u0440\u0435\u0442\u0430\u0449\u0438\u0442\u0435 subscriptions.csv \u0444\u0430\u0439\u043B \u0441\u044E\u0434\u0430"])},"file-input-label":r=>{const{normalize:e}=r;return e(["Upload file"])}}}})}typeof g=="function"&&g(O);export{O as default};
