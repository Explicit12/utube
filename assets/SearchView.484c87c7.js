import{d as I,a as R,r,l as h,m as V,o as q,c as n,F as f,n as v,f as m,p as y,_ as E,g as _,e as C,h as L,q as T,v as A,w as P,k as t,x as D,y as F}from"./index.883e5150.js";import{_ as N,C as Q}from"./ChannelCompactSkeleton.f5081869.js";import"./TheButton.vue_vue_type_script_setup_true_lang.8f9866de.js";const $={class:"px-4 lg:px-6"},j={key:0,class:"mx-auto flex max-w-screen-xl flex-col justify-center"},z={key:0,class:"flex flex-col gap-4 pt-8"},M=C("hr",null,null,-1),O={key:1,class:"flex flex-col gap-4 pt-8"},U=C("hr",null,null,-1),K=I({__name:"SearchView",props:{searchQuery:null},setup(b){const x=b,k=R(()=>L(()=>import("./TheError.0668a5eb.js"),["assets/TheError.0668a5eb.js","assets/index.883e5150.js","assets/index.d24e2409.css"])),l=r(),a=r([]),c=r([]),d=r(3),g=h(()=>[...a.value].sort((e,o)=>e.subCount&&o.subCount?o.subCount-e.subCount:0)),w=h(()=>g.value.slice(0,d.value)),S=h(()=>c.value.filter(e=>e.published&&e.viewCount));async function p(e){try{const o=await T(e);a.value=o;const i=await Promise.all(a.value.map(u=>A(u.authorId)));a.value=a.value.map((u,B)=>(u.subCount=i[B],u));const s=await P(e);c.value=s}catch(o){l.value=o}}return V(e=>{if(typeof e.query.search_query!="string")return!1;a.value=[],c.value=[],p(e.query.search_query)}),q(()=>p(x.searchQuery)),(e,o)=>{const i=F("RouterLink");return t(),n("main",$,[l.value?(t(),_(m(k),{key:1,message:l.value.message},null,8,["message"])):(t(),n("div",j,[a.value.length?(t(),n("div",z,[(t(!0),n(f,null,v(m(w),s=>(t(),_(i,{key:s.authorId,to:{name:"channel",params:{id:s.authorId}}},{default:D(()=>[y(N,{name:s.author,subs:s.subCount?s.subCount:0,thumbnail:s.authorThumbnails,"channels-id":s.authorId},null,8,["name","subs","thumbnail","channels-id"])]),_:2},1032,["to"]))),128)),M])):(t(),n("div",O,[(t(!0),n(f,null,v(d.value,s=>(t(),_(Q,{key:s}))),128)),U])),y(E,{videos:m(S),"show-per-view":10,"horizontal-layout":!0,class:"py-4"},null,8,["videos"])]))])}}});export{K as default};
