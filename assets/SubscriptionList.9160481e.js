import{E as I,k as s,c as o,e as m,d as S,u as A,r as v,s as O,l as $,b as B,U as T,o as L,K as z,F as p,q as g,v as y,w as b,f as d,t as k,g as U,C as N,B as R,x as V}from"./index.d5c4554c.js";import{_ as D}from"./TheButton.vue_vue_type_script_setup_true_lang.471cf531.js";const E={},F=m("span",{class:"flex animate-pulse items-center gap-2"},[m("div",{class:"h-8 w-10 rounded-lg bg-gray-200"}),m("span",{class:"h-4 w-full rounded-sm bg-gray-200"})],-1),M=[F];function P(l,e){return s(),o("li",null,M)}const q=I(E,[["render",P]]),K={class:"space-y-5 pt-6"},j=["src","alt"],G={key:1,class:"h-8 w-8 rounded-lg bg-gray-200"},H={class:"overflow-hidden text-ellipsis whitespace-nowrap"},J=S({__name:"SubscriptionList",setup(l){const a=A(),t=v(new Set),h=v(6),{subscriptions:i}=O(a),C=$(()=>new Set([...t.value].slice(0,h.value))),{t:_}=B();return T(()=>i.value.size,async()=>{var f;const u=(f=[...t.value].find(n=>!i.value.has(n.authorId)))==null?void 0:f.authorId,c=[...i.value].filter(n=>![...t.value].find(r=>r.authorId===n));u?t.value=new Set([...t.value].filter(n=>n.authorId!==u)):c.length&&(await Promise.all(c.map(r=>z(r)))).forEach(r=>{[...t.value].find(x=>x.authorId===r.authorId)||t.value.add(r)})}),L(()=>{Promise.all([...i.value].map(z)).then(u=>{t.value=new Set(u)})}),(u,c)=>{const f=V("RouterLink");return s(),o(p,null,[m("ul",K,[t.value.size?(s(!0),o(p,{key:0},g(d(C),n=>(s(),o("li",{key:n.author},[y(f,{to:{name:"channel",params:{id:n.authorId}},class:"flex items-center gap-2 font-sans font-normal text-gray-900"},{default:b(()=>[n.authorThumbnails[0]?(s(),o("img",{key:0,src:n.authorThumbnails[0].url,decoding:"async",referrerpolicy:"no-referrer",crossorigin:"anonymous",loading:"lazy",alt:`${n.author} ${d(_)("channel-avatar-alt")}`,class:"rounded-lg",width:"32",height:"32"},null,8,j)):(s(),o("div",G)),m("span",H,k(n.author),1)]),_:2},1032,["to"])]))),128)):(s(),o(p,{key:1},g(6,n=>y(q,{key:n})),64))]),t.value.size&&t.value.size>6?(s(),U(D,{key:0,type:"secondary",class:"mt-4 w-full",onClick:c[0]||(c[0]=n=>h.value=h.value===6?d(i).size:6)},{default:b(()=>[N(k(h.value<=6?d(_)("button-more"):d(_)("button-less")),1)]),_:1})):R("",!0)],64)}}});function w(l){l.__i18n=l.__i18n||[],l.__i18n.push({locale:"",resource:{"en-US":{"button-more":e=>{const{normalize:a}=e;return a(["More"])},"button-less":e=>{const{normalize:a}=e;return a(["Less"])},"channel-avatar-alt":e=>{const{normalize:a}=e;return a(["avatar"])}},"uk-UA":{"button-more":e=>{const{normalize:a}=e;return a(["\u0411\u0456\u043B\u044C\u0448\u0435"])},"button-less":e=>{const{normalize:a}=e;return a(["\u041C\u0435\u043D\u0448\u0435"])},"channel-avatar-alt":e=>{const{normalize:a}=e;return a(["\u0430\u0432\u0430\u0442\u0430\u0440"])}},"ru-RU":{"button-more":e=>{const{normalize:a}=e;return a(["\u0415\u0449\u0451"])},"button-less":e=>{const{normalize:a}=e;return a(["\u041C\u0435\u043D\u044C\u0448\u0435"])},"channel-avatar-alt":e=>{const{normalize:a}=e;return a(["\u0430\u0432\u0430\u0442\u0430\u0440"])}}}})}typeof w=="function"&&w(J);export{J as default};
