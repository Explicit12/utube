import{d as I,a as R,r as u,l as h,m as V,o as q,c as n,e as _,F as v,n as y,f as d,p as C,_ as E,g as m,h as L,q as T,v as A,w as P,k as a,x as D,y as F}from"./index.77c11206.js";import{_ as N,C as Q}from"./ChannelCompactSkeleton.96b39d07.js";import"./TheButton.vue_vue_type_script_setup_true_lang.0577cd4e.js";const $={class:"mx-auto max-w-screen-xl px-4 lg:px-16"},j={key:0,class:"flex flex-col justify-center"},z={key:0,class:"flex flex-col gap-4 pt-8"},M=_("hr",null,null,-1),O={key:1,class:"flex flex-col gap-4 pt-8"},U=_("hr",{class:"border-t-2 dark:border-gray-400"},null,-1),K=I({__name:"SearchView",props:{searchQuery:null},setup(b){const x=b,k=R(()=>L(()=>import("./TheError.837ad06f.js"),["assets/TheError.837ad06f.js","assets/index.77c11206.js","assets/index.07fc9a97.css"])),l=u(),t=u([]),c=u([]),p=u(3),g=h(()=>[...t.value].sort((e,o)=>e.subCount&&o.subCount?o.subCount-e.subCount:0)),w=h(()=>g.value.slice(0,p.value)),S=h(()=>c.value.filter(e=>e.published&&e.viewCount));async function f(e){try{const o=await T(e);t.value=o;const i=await Promise.all(t.value.map(r=>A(r.authorId)));t.value=t.value.map((r,B)=>(r.subCount=i[B],r));const s=await P(e);c.value=s}catch(o){l.value=o}}return V(e=>{if(typeof e.query.search_query!="string")return!1;t.value=[],c.value=[],f(e.query.search_query)}),q(()=>f(x.searchQuery)),(e,o)=>{const i=F("RouterLink");return a(),n("main",null,[_("div",$,[l.value?(a(),m(d(k),{key:1,message:l.value.message},null,8,["message"])):(a(),n("div",j,[t.value.length?(a(),n("div",z,[(a(!0),n(v,null,y(d(w),s=>(a(),m(i,{key:s.authorId,to:{name:"channel",params:{id:s.authorId}}},{default:D(()=>[C(N,{name:s.author,subs:s.subCount?s.subCount:0,thumbnail:s.authorThumbnails,"channels-id":s.authorId},null,8,["name","subs","thumbnail","channels-id"])]),_:2},1032,["to"]))),128)),M])):(a(),n("div",O,[(a(!0),n(v,null,y(p.value,s=>(a(),m(Q,{key:s}))),128)),U])),C(E,{videos:d(S),"show-per-view":10,"horizontal-layout":!0,class:"py-4"},null,8,["videos"])]))])])}}});export{K as default};
