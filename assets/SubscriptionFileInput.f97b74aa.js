import{d as w,a as x,b as z,u as k,r as _,Y as D,c as E,e as d,t as b,f as m,g as C,C as T,h as B,k as h}from"./index.126353d9.js";async function g(t){const r=new FileReader;return r.readAsText(t),new Promise(e=>{r.onload=a=>e(I(a))})}async function I(t){const e=t.target.result;if(typeof e=="string"){const a=e.slice(0,e.indexOf(`
`)).split(",");return e.slice(e.indexOf(`
`)+1).split(`
`).filter(l=>l!=="").map(l=>{const o=l.split(",");return a.reduce((c,f,p)=>(c[f]=o[p],c),{})})}}const O={for:"file-input",class:"sr-only"},S=w({__name:"SubscriptionFileInput",setup(t){const r=x(()=>B(()=>import("./TheError.fbf153b4.js"),["assets/TheError.fbf153b4.js","assets/index.126353d9.js","assets/index.e5e21443.css"])),{t:e}=z(),a=k(),{subscribeToChannel:l}=a,o=_(),c=_();async function f(n){try{if(n&&n[0].type==="text/csv"){o.value=void 0;const s=await g(n[0]);s==null||s.forEach(u=>l(u["Channel Id"]))}else throw new Error("Wrong file type")}catch(s){console.error(s.message),o.value=s}}async function p(n){const u=(n==null?void 0:n.currentTarget).files;try{if(u&&u[0].type==="text/csv"){o.value=void 0;const i=await g(u[0]);i==null||i.forEach(v=>l(v["Channel Id"]))}else throw new Error("Wrong file type")}catch(i){console.error(i.message),o.value=i}}return D(c,f),(n,s)=>(h(),E("form",null,[d("div",{ref_key:"importDropZone",ref:c,class:"mt-6 flex h-64 w-full items-center justify-center rounded-lg border-4 border-dashed border-blue-600 p-4 text-center text-gray-900 dark:border-white dark:text-white"},b(m(e)("drop-zone")),513),d("label",O,b(m(e)("file-input-label")),1),d("input",{id:"file-input",type:"file",class:"mt-4 block w-full border-white font-sans text-base font-normal text-gray-900 file:block file:w-full file:rounded-lg file:border-2 file:border-transparent file:bg-blue-50 file:py-2 file:px-4 file:text-white hover:cursor-pointer file:hover:cursor-pointer dark:text-white dark:file:bg-gray-800",onChange:p},null,32),o.value?(h(),C(m(r),{key:0,message:o.value.message,class:"h-fit p-2"},null,8,["message"])):T("",!0)]))}});function y(t){t.__i18n=t.__i18n||[],t.__i18n.push({locale:"",resource:{en:{"drop-zone":r=>{const{normalize:e}=r;return e(["Drop subscriptions.csv file here"])},"file-input-label":r=>{const{normalize:e}=r;return e(["Upload file"])}},uk:{"drop-zone":r=>{const{normalize:e}=r;return e(["\u041F\u0435\u0440\u0435\u0442\u044F\u0433\u043D\u0456\u0442\u044C \u0441\u044E\u0434\u0438 subscriptions.csv \u0444\u0430\u0439\u043B"])},"file-input-label":r=>{const{normalize:e}=r;return e(["Upload file"])}},ru:{"drop-zone":r=>{const{normalize:e}=r;return e(["\u041F\u0435\u0440\u0435\u0442\u0430\u0449\u0438\u0442\u0435 subscriptions.csv \u0444\u0430\u0439\u043B \u0441\u044E\u0434\u0430"])},"file-input-label":r=>{const{normalize:e}=r;return e(["Upload file"])}}}})}typeof y=="function"&&y(S);export{S as default};
